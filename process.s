#NO_APP
	.file	"process.c"
	.comm	proceses,74,2
	.comm	cur_process,2,2
	.text
	.align	2
	.globl	init_processes
	.type	init_processes, @function
init_processes:
	link.w %fp,#0
	clr.w cur_process
	nop
	unlk %fp
	rts
	.size	init_processes, .-init_processes
	.align	2
	.globl	get_free_pid
	.type	get_free_pid, @function
get_free_pid:
	link.w %fp,#0
	clr.w %d0
	unlk %fp
	rts
	.size	get_free_pid, .-get_free_pid
	.section	.rodata
.LC0:
	.string	"pd: %d\n"
.LC1:
	.string	"pd: 0x%X\n"
.LC2:
	.string	"3"
	.text
	.align	2
	.globl	load_small_process
	.type	load_small_process, @function
load_small_process:
	link.w %fp,#-32
	move.l %d2,-(%sp)
	jsr get_free_pid
	move.w %d0,-6(%fp)
	jsr get_page
	move.w %d0,-8(%fp)
	jsr get_page
	move.w %d0,-10(%fp)
	jsr get_page
	move.w %d0,-12(%fp)
	jsr get_page
	move.w %d0,-14(%fp)
	clr.l %d0
	move.w -8(%fp),%d0
	move.l %d0,-(%sp)
	pea .LC0
	jsr printf
	addq.l #8,%sp
	clr.l %d0
	move.w -8(%fp),%d0
	move.l %d0,-(%sp)
	jsr page_addr
	addq.l #4,%sp
	move.l %d0,-18(%fp)
	clr.l %d0
	move.w -10(%fp),%d0
	move.l %d0,-(%sp)
	jsr page_addr
	addq.l #4,%sp
	move.l %d0,-22(%fp)
	clr.l %d0
	move.w -12(%fp),%d0
	move.l %d0,-(%sp)
	jsr page_addr
	addq.l #4,%sp
	move.l %d0,-26(%fp)
	clr.l %d0
	move.w -14(%fp),%d0
	move.l %d0,-(%sp)
	jsr page_addr
	addq.l #4,%sp
	move.l %d0,-30(%fp)
	move.l -18(%fp),-(%sp)
	pea .LC1
	jsr printf
	addq.l #8,%sp
	clr.l -4(%fp)
	jra .L5
.L6:
	move.l -4(%fp),%d0
	lsl.l #2,%d0
	move.l -18(%fp),%a0
	add.l %d0,%a0
	clr.l (%a0)
	move.l -4(%fp),%d0
	lsl.l #2,%d0
	move.l -22(%fp),%a0
	add.l %d0,%a0
	clr.l (%a0)
	addq.l #1,-4(%fp)
.L5:
	cmp.l #1023,-4(%fp)
	jle .L6
	pea .LC2
	jsr puts
	addq.l #4,%sp
	move.l -22(%fp),%d0
	addq.l #2,%d0
	move.l -18(%fp),%a0
	move.l %d0,(%a0)
	move.l -26(%fp),%d0
	addq.l #1,%d0
	move.l -22(%fp),%a0
	move.l %d0,(%a0)
	move.l -22(%fp),%a0
	addq.l #4,%a0
	move.l -30(%fp),%d0
	addq.l #1,%d0
	move.l %d0,(%a0)
	clr.l %d1
	move.w -6(%fp),%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.w -8(%fp),proceses(%d0.l)
	clr.l %d1
	move.w -6(%fp),%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	clr.l proceses+2(%d0.l)
	clr.l %d1
	move.w -6(%fp),%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	clr.w proceses+6(%d0.l)
	clr.l %d1
	move.w -6(%fp),%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l #8192,proceses+68(%d0.l)
	clr.l -4(%fp)
	jra .L7
.L8:
	move.l -4(%fp),%d0
	lsl.l #2,%d0
	move.l -26(%fp),%a0
	add.l %d0,%a0
	move.l -4(%fp),%d0
	lsl.l #2,%d0
	move.l 8(%fp),%a1
	add.l %d0,%a1
	move.l (%a1),%d0
	move.l %d0,(%a0)
	addq.l #1,-4(%fp)
.L7:
	moveq #63,%d0
	cmp.l -4(%fp),%d0
	jge .L8
	move.w -6(%fp),%d0
	move.l -36(%fp),%d2
	unlk %fp
	rts
	.size	load_small_process, .-load_small_process
	.align	2
	.globl	kill_pid
	.type	kill_pid, @function
kill_pid:
	link.w %fp,#-4
	move.l 8(%fp),%d0
	move.w %d0,-2(%fp)
	nop
	unlk %fp
	rts
	.size	kill_pid, .-kill_pid
	.align	2
	.globl	save_process
	.type	save_process, @function
save_process:
	link.w %fp,#0
	move.l %d3,-(%sp)
	move.l %d2,-(%sp)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 8(%fp),proceses+2(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l 12(%fp),%d2
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d3
	lsl.l #3,%d3
	add.l %d3,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.w %d2,proceses+6(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 16(%fp),proceses+68(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 20(%fp),proceses+64(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 24(%fp),proceses+60(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 28(%fp),proceses+56(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 32(%fp),proceses+52(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 36(%fp),proceses+48(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 40(%fp),proceses+44(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 44(%fp),proceses+40(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 48(%fp),proceses+36(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 52(%fp),proceses+32(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 56(%fp),proceses+28(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 60(%fp),proceses+24(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 64(%fp),proceses+20(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 68(%fp),proceses+16(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 72(%fp),proceses+12(%d0.l)
	move.w cur_process,%d0
	clr.l %d1
	move.w %d0,%d1
	move.l %d1,%d0
	lsl.l #2,%d0
	move.l %d0,%d2
	lsl.l #3,%d2
	add.l %d2,%d0
	add.l %d1,%d0
	add.l %d0,%d0
	move.l 76(%fp),proceses+8(%d0.l)
	nop
	move.l (%sp)+,%d2
	move.l (%sp)+,%d3
	unlk %fp
	rts
	.size	save_process, .-save_process
	.ident	"GCC: (GNU) 5.3.0"
